<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta content="Database Log | RegTech Admin" name="description" />
    <meta content="Database Log | RegTech Admin" name="admin" />
    <title>Database Log | RegTech Admin</title>

    {% set load_css = load_css() %}
    {% if load_css %}
    {{ load_css | safe }}
    {% endif %}
</head>

<body>

    <div class="wrapper">
        <!-- Top Bar -->
        {% set topbars = load_topbar(username) %}
        {% if topbars %}
        {{ topbars | safe }}
        {% endif %}

        <!-- Routes -->
        {% set pagelinks = navigation_urls(manage_role) %}
        {% if pagelinks %}
        {{ pagelinks | safe }}
        {% endif %}


        <div class="content-page">
            <div class="content">
                <!-- Start Content-->
                <div class="container-fluid">
                    <div class="row">
                        <div class="col-12">
                            <div class="page-title-box">
                                <div class="page-title-right">
                                    <ol class="breadcrumb m-0">
                                        <li class="breadcrumb-item"><a href="/database-log">DB</a></li>
                                        <li class="breadcrumb-item active">LOGS</li>
                                    </ol>
                                </div>
                                <h4 class="page-title">DB Log</h4>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col">
                            <div class="card">
                                <div class="card-body">

                                    <div class="table-responsive">
                                        <table id="basic-datatable"
                                            class="table table-bordered dataTable no-footer dtr-inline">
                                            <thead>
                                                <tr style="text-align: center;">
                                                    <th class="text-wrap" style="width:300px">
                                                        Company Name</th>
                                                    <th class="text-wrap" style="width:300px">
                                                        Service Name</th>
                                                    <th class="text-wrap" style="width:300px">
                                                        Unique ID</th>
                                                    <th class="text-wrap" style="width:300px">Status</th>
                                                    <th class="text-wrap" style="width:300px">Request Date</th>
                                                    <th class="text-wrap" style="width:300px">Response Date</th>
                                                    <th class="text-wrap" style="width:300px">Time Taken</th>
                                                    <th class="text-wrap" style="width:300px">Created Date</th>
                                                    <th class="text-wrap" style="width:300px">Download</th>

                                                </tr>
                                            </thead>
                                            <thead class="filters display">
                                                <tr>
                                                    <th style="white-space: nowrap;" id="permission_action_filter">
                                                        <select class="form-control select2" id="company_name"
                                                            style="min-width: 150px;">
                                                            <option value="">Select Company Name</option>
                                                            <option value="Craftsilicon">Craftsilicon</option>
                                                        </select>
                                                    </th>
                                                    <th style="white-space: nowrap;">
                                                        <select class="form-control select2" id="api_service"
                                                            style="min-width: 150px;">
                                                            <option value="">Select Service</option>
                                                            <option value="Aadhar_Masking">Aadhar_Masking</option>
                                                            <option value="Bank_statement">Bank_statement</option>
                                                            <option value="Image_quality_check">Image_quality_check
                                                            </option>
                                                            <option value="Lang_Translate">Lang_Translate</option>
                                                            <option value="Name_Match">Name_Match</option>
                                                            <option value="Object_detaction">Object_detaction</option>
                                                            <option value="OCR_img_reading">OCR_img_reading</option>
                                                        </select>
                                                    </th>
                                                    <th style="white-space: nowrap;">
                                                        <input class="form-control" type="text"
                                                            placeholder="Unique ID" />
                                                    </th>
                                                    <th style="white-space: nowrap;">
                                                        <select class="form-control select2" id="api_status"
                                                            style="min-width: 150px;">
                                                            <option value="">Select Status</option>
                                                            <option value="Fail">Fail</option>
                                                            <option value="Success">Success</option>
                                                        </select>
                                                    </th>
                                                    <th style="white-space: nowrap;">
                                                        <input type="text" class="form-control " name="request_date"
                                                            value="" autocomplete="off" readonly />
                                                    </th>
                                                    <th style="white-space: nowrap;">
                                                        <input type="text" class="form-control " name="response_date"
                                                            value="" autocomplete="off" readonly />
                                                    </th>
                                                    <th style="white-space: nowrap;">
                                                        &nbsp;
                                                    </th>
                                                    <th style="white-space: nowrap;">
                                                        <input type="text" class="form-control " name="created_date"
                                                            value="" autocomplete="off" readonly />
                                                    </th>
                                                    <th style="white-space: nowrap;">
                                                        &nbsp;
                                                    </th>
                                                </tr>
                                            </thead>

                                            <tbody>

                                            </tbody>
                                        </table>
                                    </div>
                                </div> <!-- end card body-->
                            </div> <!-- end card -->
                        </div> <!-- end .board-->
                    </div> <!-- end col -->
                </div>
                <!-- end row-->

            </div> <!-- container -->
        </div> <!-- content -->

        <!-- Footer -->
        {% set footers = load_footer() %}
        {% if footers %}
        {{ footers | safe }}
        {% endif %}

        <!-- Layout Wrapper end -->
    </div>


    <div class="modal fade" id="log_file_modal" tabindex="-1" aria-labelledby="vieweModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-xl modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="vieweModalLabel">Log Files</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="table-responsive">
                        <table id="log-datatable" class="table table-bordered dataTable no-footer dtr-inline">
                            <thead>
                                <tr style="text-align: center;">
                                    <th style="white-space: nowrap;">
                                        Log File Name</th>
                                    <th style="white-space: nowrap;">
                                        Log File Download</th>
                                </tr>
                            </thead>
                            <tbody>

                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Add Plan Model -->
    <div class="modal fade" id="add_plan_form" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title text-center w-100">Add New Plan</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form method="post" action="#">
                        <div class="row mb-3">
                            <div class="col">
                                <label class="form-label d-flex">Plan Name <div class="text-muted">(*Required)</div>
                                </label>
                                <input type="text" class="form-control" name="plan_name"
                                    onkeyup="check_planname_velidity(this)" placeholder="Enter Plan Name"
                                    autocomplete="off" required>
                                <span class="text-danger" id="velidity_error" style="display: none;"></span>
                            </div>
                            <div class="col">
                                <label class="form-label d-flex">Plan Type <div class="text-muted">(*Required)</div>
                                </label>
                                <select class="form-select modal-select2 auto-width-select2" name="plan_type"
                                    onchange="add_type_change(this)" required>
                                    <option value="">-</option>
                                    <option value="Percentage">Percentage</option>
                                    <option value="Fix">Fix Month</option>
                                </select>
                            </div>
                        </div>
                        <div class="row mb-3">
                            <div class="col">
                                <label class="form-label d-flex">Interest <div class="text-muted">(*Required)</div>
                                </label>
                                <input type="number" class="form-control" min="1" step="0.01" name="intrest"
                                    placeholder="Enter Interest" max="100" required>
                            </div>
                            <div class="col">
                                <label class="form-label">Notes</label>
                                <textarea type="number" class="form-control " name="notes"
                                    placeholder="Notes"></textarea>
                            </div>
                        </div>
                        <div class="row mb-3" id="inpufix" style="display: none;">
                            <div class="col-6">
                                <label class="form-label d-flex">Fix Months <div class="text-muted">(*Required)</div>
                                </label>
                                <input type="number" class="form-control " name="fix_month"
                                    placeholder="How Many Months Invest">
                            </div>
                        </div>
                        <div class="text-end">
                            <button type="submit" id="add_plan" class="btn btn-primary">Submit</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Edit Plan Model -->
    <!-- Modal -->
    <div class="modal fade" id="edit_plan_form" tabindex="-1" aria-labelledby="editModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title text-center w-100" id="editModalLabel">Edit Plan</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form method="post" action="#" id="update_action">
                        <div class="row mb-3">
                            <div class="col">
                                <label class="form-label d-flex">Plan Name <div class="text-muted">(*Required)</div>
                                </label>
                                <input type="text" class="form-control" name="plan_name" id="edit_plan_name"
                                    onkeyup="check_planname_velidity_update(this)" placeholder="Enter Plan Name"
                                    required>
                                <span class="text-danger" id="velidity_error_update" style="display: none;"></span>
                            </div>
                            <div class="col">
                                <label class="form-label d-flex">Plan Type <div class="text-muted">(*Required)</div>
                                </label>
                                <select class="form-select modal-select2 auto-width-select2" name="plan_type"
                                    id="edit_plan_type" onchange="update_type_change(this.value)" required>
                                    <option value="">-</option>
                                    <option value="Percentage">Percentage</option>
                                    <option value="Fix">Fix Month</option>
                                </select>
                            </div>
                        </div>
                        <div class="row mb-3">
                            <div class="col">
                                <label class="form-label d-flex">Interest <div class="text-muted">(*Required)</div>
                                </label>
                                <input type="number" class="form-control" min="1" max="100" step="0.01" name="intrest"
                                    id="edit_intrest" placeholder="Enter Interest" required>
                            </div>
                            <div class="col">
                                <label class="form-label">Notes</label>
                                <textarea type="number" class="form-control " name="notes" id="edit_notes"
                                    placeholder="Notes"></textarea>
                            </div>
                        </div>
                        <div class="row mb-3" id="update_inputfix" style="display: none;">
                            <div class="col-6">
                                <label class="form-label d-flex">Fix Months <div class="text-muted">(*Required)</div>
                                </label>
                                <input type="number" class="form-control " name="fix_month" id="edit_fix_month"
                                    placeholder="How Many Months Invest">
                            </div>
                        </div>
                        <div class="text-end">
                            <button class="btn btn-primary" type="submit" id="obj_id">Submit</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>


    <!-- All Javascripts URL -->
    {% set load_js = load_javascript() %}
    {% if load_js %}
    {{ load_js | safe }}
    {% endif %}


    <!-- Page Javascript -->
    {% include 'portal_page_js.html' %}




    <script>
        // Request Date
        $(function () {
            var start = moment().subtract(29, 'days');
            var end = moment();

            $('input[name="request_date"]').on('apply.daterangepicker', function (ev, picker) {

                $(this).val(picker.startDate.format('DD-MM-YYYY') + ' - ' + picker.endDate.format('DD-MM-YYYY'));
            });

            $('input[name="request_date"]').on('cancel.daterangepicker', function (ev, picker) {
                $(this).val('');
                // $(this)[0].textContent = "khjk"
                $('#basic-datatable').DataTable().context[0].aoPreSearchCols[4].sSearch = ""
                $('#basic-datatable').DataTable().ajax.reload()
            });

            $('input[name="request_date"]').daterangepicker({
                startDate: start,
                endDate: end,
                autoUpdateInput: false,
                "opens": "center",
                locale: {
                    cancelLabel: 'Clear',
                    applyLabel: 'Apply',
                    fromLabel: 'From',
                    toLabel: 'To',
                    customRangeLabel: 'Custom Range',
                    daysOfWeek: ['Su', 'Mo', 'Tu', 'We', 'Th', 'Fr', 'Sa'],
                    monthNames: ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'],
                    firstDay: 1
                },
                ranges: {
                    'Today': [moment(), moment()],
                    'Yesterday': [moment().subtract(1, 'days'), moment().subtract(1, 'days')],
                    'Last 7 Days': [moment().subtract(6, 'days'), moment()],
                    'Last 30 Days': [moment().subtract(29, 'days'), moment()],
                },
                // Datetime and date range picker

            });
        });


        // Responce date
        $(function () {
            var start = moment().subtract(29, 'days');
            var end = moment();

            $('input[name="response_date"]').on('apply.daterangepicker', function (ev, picker) {

                $(this).val(picker.startDate.format('DD-MM-YYYY') + ' - ' + picker.endDate.format('DD-MM-YYYY'));
            });

            $('input[name="response_date"]').on('cancel.daterangepicker', function (ev, picker) {
                $(this).val('');
                // $(this)[0].textContent = "khjk"
                $('#basic-datatable').DataTable().context[0].aoPreSearchCols[5].sSearch = ""
                $('#basic-datatable').DataTable().ajax.reload()
            });

            $('input[name="response_date"]').daterangepicker({
                startDate: start,
                endDate: end,
                autoUpdateInput: false,
                "opens": "center",
                locale: {
                    cancelLabel: 'Clear',
                    applyLabel: 'Apply',
                    fromLabel: 'From',
                    toLabel: 'To',
                    customRangeLabel: 'Custom Range',
                    daysOfWeek: ['Su', 'Mo', 'Tu', 'We', 'Th', 'Fr', 'Sa'],
                    monthNames: ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'],
                    firstDay: 1
                },
                ranges: {
                    'Today': [moment(), moment()],
                    'Yesterday': [moment().subtract(1, 'days'), moment().subtract(1, 'days')],
                    'Last 7 Days': [moment().subtract(6, 'days'), moment()],
                    'Last 30 Days': [moment().subtract(29, 'days'), moment()],
                },
                // Datetime and date range picker

            });
        });

        // Created Date
        $(function () {
            var start = moment().subtract(29, 'days');
            var end = moment();

            $('input[name="created_date"]').on('apply.daterangepicker', function (ev, picker) {

                $(this).val(picker.startDate.format('DD-MM-YYYY') + ' - ' + picker.endDate.format('DD-MM-YYYY'));
            });

            $('input[name="created_date"]').on('cancel.daterangepicker', function (ev, picker) {
                $(this).val('');
                // $(this)[0].textContent = "khjk"
                $('#basic-datatable').DataTable().context[0].aoPreSearchCols[7].sSearch = ""
                $('#basic-datatable').DataTable().ajax.reload()
            });

            $('input[name="created_date"]').daterangepicker({
                startDate: start,
                endDate: end,
                autoUpdateInput: false,
                "opens": "center",
                locale: {
                    cancelLabel: 'Clear',
                    applyLabel: 'Apply',
                    fromLabel: 'From',
                    toLabel: 'To',
                    customRangeLabel: 'Custom Range',
                    daysOfWeek: ['Su', 'Mo', 'Tu', 'We', 'Th', 'Fr', 'Sa'],
                    monthNames: ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'],
                    firstDay: 1
                },
                ranges: {
                    'Today': [moment(), moment()],
                    'Yesterday': [moment().subtract(1, 'days'), moment().subtract(1, 'days')],
                    'Last 7 Days': [moment().subtract(6, 'days'), moment()],
                    'Last 30 Days': [moment().subtract(29, 'days'), moment()],
                },
                // Datetime and date range picker

            });
        });


    </script>

    {% with messages = get_flashed_messages() %}
    {% if messages %}
    {% for message in messages %}
    <script>
        !function (c) {
            "use strict"; function t() { }
            t.prototype.send = function (t, o, i, e, n, a, s, r) {
                t = { heading: t, text: o, position: i, loaderBg: e, icon: n, hideAfter: a = a || 3e3, stack: s = s || 1 };
                t.showHideTransition = r || "fade", c.toast().reset("all"), c.toast(t)
            }, c.NotificationApp = new t, c.NotificationApp.Constructor = t,
                c.NotificationApp.send("Plan-List!", "{{message}}", "top-right", "rgba(0,0,0,0.2)", "success")
        }(window.jQuery);
    </script>
    {% endfor %}
    {% endif%}
    {% endwith %}

</body>

</html>